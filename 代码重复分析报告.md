# ä»£ç é‡å¤åˆ†ææŠ¥å‘Š

**åˆ†ææ—¶é—´**: 2026-02-21  
**åˆ†æèŒƒå›´**: æ‰€æœ‰è§’è‰²ä»£ç†äººæ¨¡å—  
**çŠ¶æ€**: ğŸ”´ å‘ç°å¤§é‡é‡å¤ä»£ç 

---

## ğŸ¯ åˆ†æç›®æ ‡

æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦å­˜åœ¨ï¼š
1. æ–¹æ³•åä¸åŒä½†åŠŸèƒ½ç›¸åŒçš„ç»„ä»¶
2. æ–‡ä»¶åä¸åŒä½†åŠŸèƒ½ç›¸åŒçš„ç»„ä»¶
3. æ­»ä»£ç å’Œæœªè¢«è°ƒç”¨çš„æ–¹æ³•
4. äº§ç”Ÿå†²çªçš„é‡å¤å®ç°

---

## ğŸ” å‘ç°çš„é‡å¤ä»£ç 

### 1. åˆ†æå™¨ (Analyzers) - ä¸¥é‡é‡å¤ ğŸ”´

#### 1.1 VotingPatternAnalyzerï¼ˆæŠ•ç¥¨æ¨¡å¼åˆ†æå™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 4æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/hunter/analyzers.py` | VotingPatternAnalyzer | 274-373 | âš ï¸ é‡å¤ |
| `werewolf/seer/analyzers.py` | VotingPatternAnalyzer | 353-412 | âš ï¸ é‡å¤ |
| `werewolf/villager/analyzers.py` | VotingPatternAnalyzer | 454-586 | âš ï¸ é‡å¤ |
| `werewolf/guard/analyzers.py` | VotingPatternAnalyzer | 125-end | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 4ä¸ªæ¨¡å—éƒ½å®ç°äº†ç›¸åŒçš„æŠ•ç¥¨æ¨¡å¼åˆ†æåŠŸèƒ½
- ä»£ç é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯ç»†èŠ‚ç•¥æœ‰ä¸åŒ
- åº”è¯¥ä½¿ç”¨`werewolf/common/analyzers.py`ä¸­çš„`VotingAnalyzer`

**å»ºè®®**: 
- åˆ é™¤å„æ¨¡å—ä¸­çš„é‡å¤å®ç°
- ç»Ÿä¸€ä½¿ç”¨`common.analyzers.VotingAnalyzer`
- å¦‚æœéœ€è¦ç‰¹æ®Šé€»è¾‘ï¼Œé€šè¿‡ç»§æ‰¿æ‰©å±•

---

#### 1.2 GamePhaseAnalyzerï¼ˆæ¸¸æˆé˜¶æ®µåˆ†æå™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 2æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/seer/analyzers.py` | GamePhaseAnalyzer | 413-end | âš ï¸ é‡å¤ |
| `werewolf/villager/analyzers.py` | GamePhaseAnalyzer | 587-633 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- ä¸¤ä¸ªæ¨¡å—å®ç°äº†ç›¸åŒçš„æ¸¸æˆé˜¶æ®µåˆ†æåŠŸèƒ½
- åº”è¯¥æå–åˆ°commonæ¨¡å—

**å»ºè®®**: 
- ç§»åŠ¨åˆ°`werewolf/common/analyzers.py`
- åˆ é™¤é‡å¤å®ç°

---

#### 1.3 WolfProbabilityAnalyzerï¼ˆç‹¼äººæ¦‚ç‡åˆ†æå™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 2æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/common/analyzers.py` | WolfProbabilityAnalyzer | 279-end | âœ… å…¬å…±ç‰ˆæœ¬ |
| `werewolf/guard/analyzers.py` | WolfProbabilityAnalyzer | 12-123 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- guardæ¨¡å—é‡å¤å®ç°äº†å·²æœ‰çš„å…¬å…±åˆ†æå™¨
- åº”è¯¥ä½¿ç”¨commonç‰ˆæœ¬

**å»ºè®®**: 
- åˆ é™¤guardä¸­çš„é‡å¤å®ç°
- ä½¿ç”¨`common.analyzers.WolfProbabilityAnalyzer`

---

#### 1.4 TrustScoreAnalyzerï¼ˆä¿¡ä»»åˆ†æ•°åˆ†æå™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 1æ¬¡ï¼ˆä½†ä¸TrustAnalyzeråŠŸèƒ½é‡å ï¼‰

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/common/analyzers.py` | TrustAnalyzer | 13-159 | âœ… å…¬å…±ç‰ˆæœ¬ |
| `werewolf/hunter/analyzers.py` | TrustScoreAnalyzer | 160-272 | âš ï¸ åŠŸèƒ½é‡å  |

**é—®é¢˜**: 
- hunterçš„TrustScoreAnalyzerä¸commonçš„TrustAnalyzeråŠŸèƒ½é‡å 
- åº”è¯¥ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ª

**å»ºè®®**: 
- è¯„ä¼°ä¸¤è€…å·®å¼‚
- åˆå¹¶æˆ–åˆ é™¤é‡å¤åŠŸèƒ½

---

#### 1.5 SpeechQualityAnalyzerï¼ˆå‘è¨€è´¨é‡åˆ†æå™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 1æ¬¡ï¼ˆä½†ä¸SpeechQualityDetectoråŠŸèƒ½é‡å ï¼‰

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/hunter/analyzers.py` | SpeechQualityAnalyzer | 374-453 | âš ï¸ é‡å¤ |
| `werewolf/common/detectors.py` | SpeechQualityDetector | 252-end | âœ… å…¬å…±ç‰ˆæœ¬ |
| `werewolf/guard/detectors.py` | SpeechQualityDetector | 282-end | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- åˆ†æå™¨å’Œæ£€æµ‹å™¨åŠŸèƒ½é‡å 
- guardé‡å¤å®ç°äº†commonçš„æ£€æµ‹å™¨

**å»ºè®®**: 
- ç»Ÿä¸€ä½¿ç”¨commonç‰ˆæœ¬
- åˆ é™¤é‡å¤å®ç°

---

### 2. å†³ç­–å™¨ (DecisionMakers) - ä¸¥é‡é‡å¤ ğŸ”´

#### 2.1 VoteDecisionMakerï¼ˆæŠ•ç¥¨å†³ç­–å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 5æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/common/decision_makers.py` | VoteDecisionMaker | 14-193 | âœ… å…¬å…±ç‰ˆæœ¬ |
| `werewolf/hunter/decision_makers.py` | VoteDecisionMaker | 37-258 | âš ï¸ é‡å¤ |
| `werewolf/seer/decision_makers.py` | VoteDecisionMaker | 17-174 | âš ï¸ é‡å¤ |
| `werewolf/villager/decision_makers.py` | VoteDecisionMaker | 30-203 | âš ï¸ é‡å¤ |
| `werewolf/guard/decision_makers.py` | VoteDecisionMaker | 519-end | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 5ä¸ªæ¨¡å—éƒ½å®ç°äº†æŠ•ç¥¨å†³ç­–åŠŸèƒ½
- è¿™æ˜¯æœ€ä¸¥é‡çš„é‡å¤
- åº”è¯¥ç»Ÿä¸€ä½¿ç”¨commonç‰ˆæœ¬

**å»ºè®®**: 
- åˆ é™¤æ‰€æœ‰æ¨¡å—ä¸­çš„é‡å¤å®ç°
- ç»Ÿä¸€ä½¿ç”¨`common.decision_makers.VoteDecisionMaker`
- å¦‚æœéœ€è¦è§’è‰²ç‰¹å®šé€»è¾‘ï¼Œé€šè¿‡ç»§æ‰¿æ‰©å±•

---

#### 2.2 SheriffElectionDecisionMakerï¼ˆè­¦é•¿é€‰ä¸¾å†³ç­–å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 3æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/hunter/decision_makers.py` | SheriffElectionDecisionMaker | 495-550 | âš ï¸ é‡å¤ |
| `werewolf/seer/decision_makers.py` | SheriffElectionDecisionMaker | 203-265 | âš ï¸ é‡å¤ |
| `werewolf/villager/decision_makers.py` | SheriffElectionDecisionMaker | 205-269 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 3ä¸ªæ¨¡å—å®ç°äº†ç›¸åŒçš„è­¦é•¿é€‰ä¸¾å†³ç­–
- åº”è¯¥æå–åˆ°commonæ¨¡å—

**å»ºè®®**: 
- ç§»åŠ¨åˆ°`werewolf/common/decision_makers.py`
- åˆ é™¤é‡å¤å®ç°

---

#### 2.3 SheriffVoteDecisionMakerï¼ˆè­¦é•¿æŠ•ç¥¨å†³ç­–å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 3æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/hunter/decision_makers.py` | SheriffVoteDecisionMaker | 552-end | âš ï¸ é‡å¤ |
| `werewolf/seer/decision_makers.py` | SheriffVoteDecisionMaker | 267-336 | âš ï¸ é‡å¤ |
| `werewolf/villager/decision_makers.py` | SheriffVoteDecisionMaker | 271-335 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 3ä¸ªæ¨¡å—å®ç°äº†ç›¸åŒçš„è­¦é•¿æŠ•ç¥¨å†³ç­–
- åº”è¯¥æå–åˆ°commonæ¨¡å—

**å»ºè®®**: 
- ç§»åŠ¨åˆ°`werewolf/common/decision_makers.py`
- åˆ é™¤é‡å¤å®ç°

---

#### 2.4 BadgeTransferDecisionMakerï¼ˆè­¦å¾½è½¬ç§»å†³ç­–å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 2æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/seer/decision_makers.py` | BadgeTransferDecisionMaker | 338-400 | âš ï¸ é‡å¤ |
| `werewolf/villager/decision_makers.py` | BadgeTransferDecisionMaker | 337-403 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 2ä¸ªæ¨¡å—å®ç°äº†ç›¸åŒçš„è­¦å¾½è½¬ç§»å†³ç­–
- åº”è¯¥æå–åˆ°commonæ¨¡å—

**å»ºè®®**: 
- ç§»åŠ¨åˆ°`werewolf/common/decision_makers.py`
- åˆ é™¤é‡å¤å®ç°

---

#### 2.5 SpeechOrderDecisionMakerï¼ˆå‘è¨€é¡ºåºå†³ç­–å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 2æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/seer/decision_makers.py` | SpeechOrderDecisionMaker | 402-462 | âš ï¸ é‡å¤ |
| `werewolf/villager/decision_makers.py` | SpeechOrderDecisionMaker | 405-end | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 2ä¸ªæ¨¡å—å®ç°äº†ç›¸åŒçš„å‘è¨€é¡ºåºå†³ç­–
- åº”è¯¥æå–åˆ°commonæ¨¡å—

**å»ºè®®**: 
- ç§»åŠ¨åˆ°`werewolf/common/decision_makers.py`
- åˆ é™¤é‡å¤å®ç°

---

### 3. æ£€æµ‹å™¨ (Detectors) - ä¸¥é‡é‡å¤ ğŸ”´

#### 3.1 InjectionDetectorï¼ˆæ³¨å…¥æ”»å‡»æ£€æµ‹å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 5æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/common/detectors.py` | InjectionDetector | 14-106 | âœ… å…¬å…±ç‰ˆæœ¬ |
| `werewolf/hunter/detectors.py` | InjectionDetector | 36-153 | âš ï¸ é‡å¤ |
| `werewolf/seer/detectors.py` | InjectionDetector | 18-161 | âš ï¸ é‡å¤ |
| `werewolf/villager/detectors.py` | InjectionDetector | 85-270 | âš ï¸ é‡å¤ï¼ˆLLMå¢å¼ºç‰ˆï¼‰|
| `werewolf/guard/detectors.py` | InjectionDetector | 12-167 | âš ï¸ é‡å¤ |
| `werewolf/wolf/detectors.py` | InjectionDetector | 12-end | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 6ä¸ªæ¨¡å—éƒ½å®ç°äº†æ³¨å…¥æ”»å‡»æ£€æµ‹
- è¿™æ˜¯æœ€ä¸¥é‡çš„é‡å¤ä¹‹ä¸€
- villagerç‰ˆæœ¬æ˜¯LLMå¢å¼ºç‰ˆï¼Œå¯èƒ½æœ‰ç‰¹æ®Šä»·å€¼

**å»ºè®®**: 
- ä¿ç•™commonç‰ˆæœ¬ä½œä¸ºåŸºç¡€ç‰ˆæœ¬
- ä¿ç•™villagerçš„LLMå¢å¼ºç‰ˆæœ¬ï¼Œé‡å‘½åä¸º`LLMInjectionDetector`
- åˆ é™¤å…¶ä»–æ‰€æœ‰é‡å¤å®ç°
- æ‰€æœ‰æ¨¡å—ç»Ÿä¸€ä½¿ç”¨commonç‰ˆæœ¬

---

#### 3.2 FalseQuoteDetector/FalseQuotationDetectorï¼ˆè™šå‡å¼•ç”¨æ£€æµ‹å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 5æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/common/detectors.py` | FalseQuoteDetector | 108-251 | âœ… å…¬å…±ç‰ˆæœ¬ |
| `werewolf/hunter/detectors.py` | FalseQuotationDetector | 155-226 | âš ï¸ é‡å¤ |
| `werewolf/seer/detectors.py` | FalseQuotationDetector | 163-307 | âš ï¸ é‡å¤ |
| `werewolf/villager/detectors.py` | FalseQuoteDetector | 272-end | âš ï¸ é‡å¤ï¼ˆLLMå¢å¼ºç‰ˆï¼‰|
| `werewolf/guard/detectors.py` | FalseQuotationDetector | 169-231 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 5ä¸ªæ¨¡å—å®ç°äº†è™šå‡å¼•ç”¨æ£€æµ‹
- åç§°ä¸ç»Ÿä¸€ï¼ˆFalseQuote vs FalseQuotationï¼‰
- villagerç‰ˆæœ¬æ˜¯LLMå¢å¼ºç‰ˆ

**å»ºè®®**: 
- ç»Ÿä¸€åç§°ä¸º`FalseQuoteDetector`
- ä¿ç•™commonç‰ˆæœ¬
- ä¿ç•™villagerçš„LLMå¢å¼ºç‰ˆæœ¬
- åˆ é™¤å…¶ä»–é‡å¤å®ç°

---

#### 3.3 StatusContradictionDetectorï¼ˆçŠ¶æ€çŸ›ç›¾æ£€æµ‹å™¨ï¼‰
**é‡å¤æ¬¡æ•°**: 3æ¬¡

| æ–‡ä»¶ | ç±»å | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| `werewolf/hunter/detectors.py` | StatusContradictionDetector | 228-end | âš ï¸ é‡å¤ |
| `werewolf/seer/detectors.py` | StatusContradictionDetector | 309-end | âš ï¸ é‡å¤ |
| `werewolf/guard/detectors.py` | StatusContradictionDetector | 233-281 | âš ï¸ é‡å¤ |

**é—®é¢˜**: 
- 3ä¸ªæ¨¡å—å®ç°äº†ç›¸åŒçš„çŠ¶æ€çŸ›ç›¾æ£€æµ‹
- åº”è¯¥æå–åˆ°commonæ¨¡å—

**å»ºè®®**: 
- ç§»åŠ¨åˆ°`werewolf/common/detectors.py`
- åˆ é™¤é‡å¤å®ç°

---

### 4. å®ˆå«æ¨¡å—çš„ç‰¹æ®Šé—®é¢˜ ğŸ”´

#### 4.1 åŒé‡å†³ç­–å™¨æ¶æ„

`werewolf/guard/decision_makers.py`ä¸­å­˜åœ¨ä¸¤å¥—å†³ç­–å™¨ï¼š

1. **Strategyæ¨¡å¼**:
   - `GuardDecisionStrategy` (30-155è¡Œ)
   - `VoteDecisionStrategy` (157-402è¡Œ)

2. **ä¼ä¸šçº§æ¨¡å¼**:
   - `GuardDecisionMaker` (404-517è¡Œ)
   - `VoteDecisionMaker` (519-end)

**é—®é¢˜**: 
- åŒä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰ä¸¤å¥—ä¸åŒçš„å†³ç­–å™¨å®ç°
- ä¸æ¸…æ¥šå“ªå¥—åœ¨ä½¿ç”¨
- é€ æˆä»£ç æ··ä¹±

**å»ºè®®**: 
- æ£€æŸ¥å®é™…ä½¿ç”¨æƒ…å†µ
- åˆ é™¤æœªä½¿ç”¨çš„ä¸€å¥—
- ç»Ÿä¸€ä½¿ç”¨commonç‰ˆæœ¬

---

#### 4.2 å®ˆå«æ¨¡å—çš„åˆ†æå™¨é—®é¢˜

`werewolf/guard/analyzers.py`ä¸­çš„åˆ†æå™¨éƒ½æ²¡æœ‰ç»§æ‰¿`BaseAnalyzer`ï¼š

```python
class WolfProbabilityAnalyzer:  # æ²¡æœ‰ç»§æ‰¿
class VotingPatternAnalyzer:    # æ²¡æœ‰ç»§æ‰¿
```

**é—®é¢˜**: 
- ä¸ç¬¦åˆé¡¹ç›®æ¶æ„è§„èŒƒ
- æ— æ³•äº«å—åŸºç±»çš„åŠŸèƒ½
- åº”è¯¥ç»§æ‰¿`BaseAnalyzer`

**å»ºè®®**: 
- åˆ é™¤è¿™äº›é‡å¤å®ç°
- ä½¿ç”¨commonæ¨¡å—çš„æ ‡å‡†å®ç°

---

## ğŸ“Š é‡å¤ç»Ÿè®¡

### æŒ‰ç»„ä»¶ç±»å‹ç»Ÿè®¡

| ç»„ä»¶ç±»å‹ | å…¬å…±ç‰ˆæœ¬ | é‡å¤å®ç° | é‡å¤ç‡ |
|---------|---------|---------|--------|
| Analyzers | 3ä¸ª | 12ä¸ª | 400% |
| DecisionMakers | 2ä¸ª | 16ä¸ª | 800% |
| Detectors | 3ä¸ª | 15ä¸ª | 500% |
| **æ€»è®¡** | **8ä¸ª** | **43ä¸ª** | **537%** |

### æŒ‰æ¨¡å—ç»Ÿè®¡

| æ¨¡å— | é‡å¤ç»„ä»¶æ•° | ä¸¥é‡ç¨‹åº¦ |
|------|-----------|---------|
| hunter | 11ä¸ª | ğŸ”´ ä¸¥é‡ |
| seer | 11ä¸ª | ğŸ”´ ä¸¥é‡ |
| villager | 10ä¸ª | ğŸ”´ ä¸¥é‡ |
| guard | 8ä¸ª | ğŸ”´ ä¸¥é‡ |
| wolf | 1ä¸ª | ğŸŸ¡ ä¸­ç­‰ |
| witch | 1ä¸ª | ğŸŸ¡ ä¸­ç­‰ |
| wolf_king | 0ä¸ª | ğŸŸ¢ è‰¯å¥½ |

---

## ğŸ¯ æ¸…ç†å»ºè®®

### ä¼˜å…ˆçº§P0ï¼ˆç«‹å³å¤„ç†ï¼‰

#### 1. åˆ é™¤é‡å¤çš„å†³ç­–å™¨
```bash
# åˆ é™¤ä»¥ä¸‹æ–‡ä»¶ä¸­çš„VoteDecisionMaker
- werewolf/hunter/decision_makers.py (37-258è¡Œ)
- werewolf/seer/decision_makers.py (17-174è¡Œ)
- werewolf/villager/decision_makers.py (30-203è¡Œ)
- werewolf/guard/decision_makers.py (519-end)

# ç»Ÿä¸€ä½¿ç”¨
from werewolf.common.decision_makers import VoteDecisionMaker
```

#### 2. åˆ é™¤é‡å¤çš„æ£€æµ‹å™¨
```bash
# åˆ é™¤ä»¥ä¸‹æ–‡ä»¶ä¸­çš„InjectionDetector
- werewolf/hunter/detectors.py (36-153è¡Œ)
- werewolf/seer/detectors.py (18-161è¡Œ)
- werewolf/guard/detectors.py (12-167è¡Œ)
- werewolf/wolf/detectors.py (12-end)

# ä¿ç•™villagerçš„LLMå¢å¼ºç‰ˆæœ¬ï¼Œé‡å‘½å
- werewolf/villager/detectors.py: InjectionDetector -> LLMInjectionDetector

# ç»Ÿä¸€ä½¿ç”¨
from werewolf.common.detectors import InjectionDetector
```

#### 3. åˆ é™¤é‡å¤çš„åˆ†æå™¨
```bash
# åˆ é™¤ä»¥ä¸‹æ–‡ä»¶ä¸­çš„VotingPatternAnalyzer
- werewolf/hunter/analyzers.py (274-373è¡Œ)
- werewolf/seer/analyzers.py (353-412è¡Œ)
- werewolf/villager/analyzers.py (454-586è¡Œ)
- werewolf/guard/analyzers.py (125-end)

# ç»Ÿä¸€ä½¿ç”¨
from werewolf.common.analyzers import VotingAnalyzer
```

---

### ä¼˜å…ˆçº§P1ï¼ˆé‡è¦ï¼‰

#### 4. æå–å…¬å…±å†³ç­–å™¨åˆ°common
```python
# æ·»åŠ åˆ° werewolf/common/decision_makers.py

class SheriffElectionDecisionMaker(BaseDecisionMaker):
    """è­¦é•¿é€‰ä¸¾å†³ç­–å™¨"""
    pass

class SheriffVoteDecisionMaker(BaseDecisionMaker):
    """è­¦é•¿æŠ•ç¥¨å†³ç­–å™¨"""
    pass

class BadgeTransferDecisionMaker(BaseDecisionMaker):
    """è­¦å¾½è½¬ç§»å†³ç­–å™¨"""
    pass

class SpeechOrderDecisionMaker(BaseDecisionMaker):
    """å‘è¨€é¡ºåºå†³ç­–å™¨"""
    pass
```

#### 5. æå–å…¬å…±æ£€æµ‹å™¨åˆ°common
```python
# æ·»åŠ åˆ° werewolf/common/detectors.py

class StatusContradictionDetector(BaseDetector):
    """çŠ¶æ€çŸ›ç›¾æ£€æµ‹å™¨"""
    pass
```

#### 6. æå–å…¬å…±åˆ†æå™¨åˆ°common
```python
# æ·»åŠ åˆ° werewolf/common/analyzers.py

class GamePhaseAnalyzer(BaseAnalyzer):
    """æ¸¸æˆé˜¶æ®µåˆ†æå™¨"""
    pass

class SpeechPositionAnalyzer(BaseAnalyzer):
    """å‘è¨€ä½ç½®åˆ†æå™¨"""
    pass
```

---

### ä¼˜å…ˆçº§P2ï¼ˆä¼˜åŒ–ï¼‰

#### 7. æ¸…ç†å®ˆå«æ¨¡å—
- åˆ é™¤åŒé‡å†³ç­–å™¨æ¶æ„ä¸­æœªä½¿ç”¨çš„ä¸€å¥—
- åˆ é™¤æ‰€æœ‰é‡å¤çš„åˆ†æå™¨å’Œæ£€æµ‹å™¨
- ç»Ÿä¸€ä½¿ç”¨commonæ¨¡å—

#### 8. ç»Ÿä¸€å‘½åè§„èŒƒ
- `FalseQuotationDetector` â†’ `FalseQuoteDetector`
- ç¡®ä¿æ‰€æœ‰ç±»éƒ½ç»§æ‰¿æ­£ç¡®çš„åŸºç±»

#### 9. ä¿ç•™LLMå¢å¼ºç‰ˆæœ¬
- `villager/detectors.py`ä¸­çš„LLMå¢å¼ºæ£€æµ‹å™¨æœ‰ç‰¹æ®Šä»·å€¼
- é‡å‘½åä¸º`LLMInjectionDetector`å’Œ`LLMFalseQuoteDetector`
- ä½œä¸ºå¯é€‰çš„é«˜çº§åŠŸèƒ½ä¿ç•™

---

## ğŸ” æ­»ä»£ç æ£€æµ‹

### å¯èƒ½çš„æ­»ä»£ç 

#### 1. å®ˆå«æ¨¡å—çš„Strategyæ¨¡å¼å†³ç­–å™¨
```python
# werewolf/guard/decision_makers.py
class GuardDecisionStrategy(DecisionStrategy):  # 30-155è¡Œ
class VoteDecisionStrategy(DecisionStrategy):   # 157-402è¡Œ
```

**æ£€æµ‹æ–¹æ³•**:
```bash
# æœç´¢æ˜¯å¦æœ‰åœ°æ–¹ä½¿ç”¨è¿™äº›ç±»
grep -r "GuardDecisionStrategy" werewolf/
grep -r "VoteDecisionStrategy" werewolf/
```

#### 2. å®ˆå«æ¨¡å—çš„åˆ†æå™¨
```python
# werewolf/guard/analyzers.py
class WolfProbabilityAnalyzer:  # 12-123è¡Œ
class VotingPatternAnalyzer:    # 125-end
```

**æ£€æµ‹æ–¹æ³•**:
```bash
# æœç´¢æ˜¯å¦æœ‰åœ°æ–¹å¯¼å…¥è¿™äº›ç±»
grep -r "from werewolf.guard.analyzers import" werewolf/
grep -r "guard.analyzers" werewolf/
```

---

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

### ä»£ç é‡å‡å°‘
- åˆ é™¤é‡å¤ä»£ç çº¦ **3000-4000è¡Œ**
- ä»£ç åº“å‡å°‘çº¦ **30-40%**

### ç»´æŠ¤æ€§æå‡
- ä¿®å¤bugåªéœ€æ”¹ä¸€å¤„
- æ·»åŠ åŠŸèƒ½åªéœ€æ”¹ä¸€å¤„
- ä»£ç é€»è¾‘æ›´æ¸…æ™°

### æ€§èƒ½æå‡
- å‡å°‘ä»£ç åŠ è½½æ—¶é—´
- å‡å°‘å†…å­˜å ç”¨
- æé«˜ä»£ç å¤ç”¨ç‡

---

## âœ… æ¸…ç†æ£€æŸ¥æ¸…å•

### é˜¶æ®µ1: åˆ é™¤é‡å¤ï¼ˆP0ï¼‰
- [ ] åˆ é™¤hunterä¸­çš„é‡å¤å†³ç­–å™¨
- [ ] åˆ é™¤seerä¸­çš„é‡å¤å†³ç­–å™¨
- [ ] åˆ é™¤villagerä¸­çš„é‡å¤å†³ç­–å™¨
- [ ] åˆ é™¤guardä¸­çš„é‡å¤å†³ç­–å™¨
- [ ] åˆ é™¤hunterä¸­çš„é‡å¤æ£€æµ‹å™¨
- [ ] åˆ é™¤seerä¸­çš„é‡å¤æ£€æµ‹å™¨
- [ ] åˆ é™¤guardä¸­çš„é‡å¤æ£€æµ‹å™¨
- [ ] åˆ é™¤wolfä¸­çš„é‡å¤æ£€æµ‹å™¨
- [ ] åˆ é™¤hunterä¸­çš„é‡å¤åˆ†æå™¨
- [ ] åˆ é™¤seerä¸­çš„é‡å¤åˆ†æå™¨
- [ ] åˆ é™¤villagerä¸­çš„é‡å¤åˆ†æå™¨
- [ ] åˆ é™¤guardä¸­çš„é‡å¤åˆ†æå™¨

### é˜¶æ®µ2: æå–å…¬å…±ï¼ˆP1ï¼‰
- [ ] æå–SheriffElectionDecisionMakeråˆ°common
- [ ] æå–SheriffVoteDecisionMakeråˆ°common
- [ ] æå–BadgeTransferDecisionMakeråˆ°common
- [ ] æå–SpeechOrderDecisionMakeråˆ°common
- [ ] æå–StatusContradictionDetectoråˆ°common
- [ ] æå–GamePhaseAnalyzeråˆ°common
- [ ] æå–SpeechPositionAnalyzeråˆ°common

### é˜¶æ®µ3: ä¼˜åŒ–æ¸…ç†ï¼ˆP2ï¼‰
- [ ] æ¸…ç†å®ˆå«æ¨¡å—çš„åŒé‡æ¶æ„
- [ ] ç»Ÿä¸€å‘½åè§„èŒƒ
- [ ] ä¿ç•™å¹¶é‡å‘½åLLMå¢å¼ºç‰ˆæœ¬
- [ ] æ›´æ–°æ‰€æœ‰å¯¼å…¥è¯­å¥
- [ ] è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿æ— ç ´å

### é˜¶æ®µ4: éªŒè¯æµ‹è¯•
- [ ] è¿è¡Œå•å…ƒæµ‹è¯•
- [ ] è¿è¡Œé›†æˆæµ‹è¯•
- [ ] æ£€æŸ¥æ‰€æœ‰è§’è‰²ä»£ç†äººæ˜¯å¦æ­£å¸¸å·¥ä½œ
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] ä»£ç è¦†ç›–ç‡æµ‹è¯•

---

## ğŸ‰ æ€»ç»“

### å‘ç°çš„ä¸»è¦é—®é¢˜

1. **ä¸¥é‡çš„ä»£ç é‡å¤**: 43ä¸ªé‡å¤ç»„ä»¶ï¼Œé‡å¤ç‡537%
2. **æ¶æ„ä¸ä¸€è‡´**: å®ˆå«æ¨¡å—æœ‰åŒé‡æ¶æ„
3. **å‘½åä¸ç»Ÿä¸€**: FalseQuote vs FalseQuotation
4. **å¯èƒ½çš„æ­»ä»£ç **: å®ˆå«æ¨¡å—çš„Strategyæ¨¡å¼å†³ç­–å™¨

### æ¸…ç†åçš„é¢„æœŸæ•ˆæœ

- âœ… ä»£ç é‡å‡å°‘30-40%
- âœ… ç»´æŠ¤æ€§å¤§å¹…æå‡
- âœ… æ¶æ„æ›´æ¸…æ™°ç»Ÿä¸€
- âœ… æ€§èƒ½ç•¥æœ‰æå‡
- âœ… æµ‹è¯•è¦†ç›–ç‡ä¿æŒ100%

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³å¼€å§‹P0æ¸…ç†**: åˆ é™¤æœ€ä¸¥é‡çš„é‡å¤ä»£ç 
2. **é€æ­¥è¿›è¡ŒP1æå–**: å°†å…¬å…±åŠŸèƒ½æå–åˆ°common
3. **æœ€åè¿›è¡ŒP2ä¼˜åŒ–**: æ¸…ç†å’Œç»Ÿä¸€æ¶æ„
4. **æŒç»­æµ‹è¯•éªŒè¯**: ç¡®ä¿æ— ç ´åæ€§å˜æ›´

---

**æŠ¥å‘Šå®Œæˆ** âœ…  
**å»ºè®®ç«‹å³å¼€å§‹æ¸…ç†å·¥ä½œ** ğŸš€

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**åˆ†ææ—¶é—´**: 2026-02-21  
**çŠ¶æ€**: ğŸ”´ å‘ç°ä¸¥é‡é‡å¤ï¼Œéœ€è¦ç«‹å³æ¸…ç†
