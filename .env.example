# ============================================================
# 狼人杀AI系统 - 环境变量配置
# ============================================================
# 使用说明：
# 1. 本地开发：复制此文件为 .env，填入真实的API密钥
# 2. 魔搭平台：OPENAI_API_KEY、OPENAI_BASE_URL、MODEL_NAME 已自动配置
# 3. .env 文件不会被提交到Git（已在.gitignore中）

# ============================================================
# 双模型架构配置（推荐）
# ============================================================
# 狼人代理使用双模型架构：
# - 生成模型（MODEL_NAME）：用于生成发言、投票理由等
# - 分析模型（ANALYSIS_MODEL_NAME）：用于分析消息、评估发言质量等
# 
# 优势：
# 1. 成本优化：分析任务使用便宜的模型，生成任务使用高质量模型
# 2. 性能优化：分析任务使用快速模型，提高响应速度
# 3. 灵活配置：可以根据需求选择不同的模型组合

# ============================================================
# 主模型配置（必需）- 用于生成发言
# ============================================================
# 用于对话生成、发言、投票理由等
# 魔搭平台已自动配置，本地开发需要手动填写

# OpenAI / 兼容OpenAI API的服务
# OPENAI_API_KEY=sk-your-api-key-here
# OPENAI_BASE_URL=https://api.openai.com/v1
# MODEL_NAME=gpt-4

# DeepSeek（推荐，性价比高）
# OPENAI_API_KEY=sk-your-deepseek-key
# OPENAI_BASE_URL=https://api.deepseek.com
# MODEL_NAME=deepseek-chat

# 通义千问
# OPENAI_API_KEY=sk-your-qwen-key
# OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
# MODEL_NAME=qwen-max

# ============================================================
# 分析模型配置（可选，推荐配置）- 用于分析消息
# ============================================================
# 用于消息分析、发言质量评估、注入攻击检测等
# 优势：使用便宜/快速的模型进行分析，节省成本约70%
# 如果不配置，将使用主模型进行分析

# 方案1：使用GPT-3.5进行分析（成本优化）
# ANALYSIS_MODEL_NAME=gpt-3.5-turbo
# （API密钥和地址使用主模型配置，无需重复设置）

# 方案2：使用DeepSeek Reasoner进行分析（推理能力强，推荐）
# ANALYSIS_MODEL_NAME=deepseek-reasoner

# 方案3：使用同一个模型（简单配置）
# 不设置ANALYSIS_MODEL_NAME，自动使用MODEL_NAME

# ============================================================
# ML训练配置
# ============================================================

# 是否启用自动训练（true/false）
# true: 游戏结束后自动收集数据并定期重训练
# false: 禁用所有ML功能
ML_AUTO_TRAIN=true

# 是否启用黄金路径（三阶段学习）（true/false）
# true: 使用三阶段渐进式学习（无监督→监督→强化）
# false: 使用兼容模式（原有增量学习逻辑）
ENABLE_GOLDEN_PATH=true

# 重训练间隔（游戏局数）
# 每N局游戏后触发一次模型重训练
# 推荐值: 10-20（快速迭代）, 50-100（生产环境）
ML_TRAIN_INTERVAL=10

# 最少样本数
# 至少需要N个样本才开始训练
# 推荐值: 50-100（快速迭代）, 200-500（生产环境）
ML_MIN_SAMPLES=50

# 模型目录
# 存储训练好的模型文件
ML_MODEL_DIR=./ml_models

# 数据目录
# 存储游戏数据和训练历史
DATA_DIR=./game_data

# ============================================================
# 部署配置（可选）
# ============================================================

# 服务端口（默认8000）
# PORT=8000

# 主机地址（默认0.0.0.0）
# HOST=0.0.0.0

# ============================================================
# 高级配置（可选）
# ============================================================

# 日志级别（DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL=INFO

# PyTorch设备（cuda/cpu）
# 如果有GPU，设置为cuda可以加速训练
TORCH_DEVICE=cpu

# 训练批次大小
# 较大的批次需要更多内存，但训练更快
BATCH_SIZE=16

# ============================================================
# 阶段特定配置（高级用户）
# ============================================================

# Stage 1: 无监督学习
STAGE1_MLM_EPOCHS=3
STAGE1_CONTRASTIVE_EPOCHS=2
STAGE1_MIN_SPEECHES=100

# Stage 2: 监督学习
STAGE2_EPOCHS=5
STAGE2_MIN_LABELED_GAMES=5

# Stage 3: 强化学习
STAGE3_EPISODES=100
STAGE3_LEARNING_RATE=0.0003

# ============================================================
# 配置示例（取消注释使用）
# ============================================================

# 示例1：OpenAI双模型（推荐，成本优化70%）
# OPENAI_API_KEY=sk-your-openai-key
# OPENAI_BASE_URL=https://api.openai.com/v1
# MODEL_NAME=gpt-4                    # 生成发言
# ANALYSIS_MODEL_NAME=gpt-3.5-turbo   # 分析消息

# 示例2：DeepSeek单模型（简单，性价比高）
# OPENAI_API_KEY=sk-your-deepseek-key
# OPENAI_BASE_URL=https://api.deepseek.com
# MODEL_NAME=deepseek-chat
# # 不设置ANALYSIS_MODEL_NAME，自动使用deepseek-chat

# 示例3：DeepSeek双模型（推理能力强）
# OPENAI_API_KEY=sk-your-deepseek-key
# OPENAI_BASE_URL=https://api.deepseek.com
# MODEL_NAME=deepseek-chat            # 生成发言
# ANALYSIS_MODEL_NAME=deepseek-reasoner  # 分析消息（推理能力强）

# 示例4：混合配置（主用OpenAI，分析用DeepSeek）
# OPENAI_API_KEY=sk-your-openai-key
# OPENAI_BASE_URL=https://api.openai.com/v1
# MODEL_NAME=gpt-4
# ANALYSIS_MODEL_NAME=deepseek-chat

# ============================================================
# 使用示例
# ============================================================

# 示例1: 快速测试（最小配置）
# ML_AUTO_TRAIN=true
# ENABLE_GOLDEN_PATH=false
# ML_TRAIN_INTERVAL=5
# ML_MIN_SAMPLES=20

# 示例2: 黄金路径开发（推荐）
# ML_AUTO_TRAIN=true
# ENABLE_GOLDEN_PATH=true
# ML_TRAIN_INTERVAL=10
# ML_MIN_SAMPLES=50

# 示例3: 生产环境（高质量）
# ML_AUTO_TRAIN=true
# ENABLE_GOLDEN_PATH=true
# ML_TRAIN_INTERVAL=20
# ML_MIN_SAMPLES=100

# 示例4: 禁用ML（纯规则）
# ML_AUTO_TRAIN=false
