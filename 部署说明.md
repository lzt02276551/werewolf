# 🚀 魔搭平台部署说明

## ✅ 项目已清理完成

项目已清理,只保留部署必需的文件。

## 📦 当前文件结构

```
.
├── .git/                          # Git仓库
├── .dockerignore                  # Docker忽略配置
├── .gitignore                     # Git忽略配置
├── .gitattributes                 # Git属性
├── .env.example                   # 环境变量模板
├── Dockerfile                     # Docker配置
├── start.sh                       # 启动脚本
├── requirements-lite.txt          # Python依赖
├── ms_deploy.json                 # 魔搭部署配置
├── config.py                      # 全局配置
├── utils.py                       # 工具函数
├── golden_path_integration.py     # 学习系统
├── README.md                      # 项目说明
├── README_DEPLOY.md               # 部署快速指南
└── werewolf/                      # 主应用代码
    ├── __init__.py
    ├── app.py                     # 应用入口
    ├── core/                      # 核心组件
    ├── common/                    # 通用组件
    ├── seer/                      # 预言家
    ├── villager/                  # 村民
    ├── witch/                     # 女巫
    ├── wolf/                      # 狼人
    ├── guard/                     # 守卫
    ├── hunter/                    # 猎人
    └── wolf_king/                 # 狼王
```

## 🎯 部署步骤

### 1. 在魔搭平台配置环境变量

**单模型模式(推荐新手)**:
```
MODEL_NAME = deepseek-chat
OPENAI_API_KEY = sk-你的密钥
OPENAI_BASE_URL = https://api.deepseek.com/v1
```

**双模型模式(推荐生产)**:
```
MODEL_NAME = deepseek-chat
OPENAI_API_KEY = sk-你的密钥
OPENAI_BASE_URL = https://api.deepseek.com/v1
DETECTION_MODEL_NAME = deepseek-reasoner
DETECTION_API_KEY = sk-你的密钥 (可以相同)
DETECTION_BASE_URL = https://api.deepseek.com/v1
```

### 2. 在魔搭平台重新构建

点击"重新构建"按钮,等待3-5分钟。

### 3. 验证部署

访问你的创空间URL,应该看到游戏界面。

## 📝 说明

### 单模型 vs 双模型

- **单模型**: 只需3个环境变量,配置简单,成本低
- **双模型**: 需要6个环境变量,性能更好,推理更强

### 代码自动回退

如果不配置 `DETECTION_MODEL_NAME`,系统会自动使用 `MODEL_NAME`,所以单模型模式完全可用。

## 🔑 获取API密钥

访问 [DeepSeek平台](https://platform.deepseek.com/) 获取API密钥。

## ❓ 常见问题

### Q: 单模型功能会受限吗?
A: 不会,所有功能都正常,只是性能略有差异。

### Q: 双模型一定要两个密钥吗?
A: 不需要,可以使用相同的密钥。

### Q: 如何切换单模型和双模型?
A: 在魔搭平台添加或删除 `DETECTION_MODEL_NAME` 等环境变量,然后重新构建。

## 📚 更多信息

- 查看 `README_DEPLOY.md` 了解快速开始
- 查看 `README.md` 了解项目详情

---

**代码已提交到Git,现在可以在魔搭平台部署了! 🎉**
