# ç‹¼äººæ€AIç³»ç»Ÿ - ä¼ä¸šçº§ç”Ÿäº§ç‰ˆ

[![Tests](https://img.shields.io/badge/tests-24%2F24%20passing-brightgreen)](./run_tests.py)
[![Code Quality](https://img.shields.io/badge/code%20quality-excellent-brightgreen)](./ä»£ç å®¡æŸ¥ä¸ä¼˜åŒ–æŠ¥å‘Š.md)
[![ML Enhanced](https://img.shields.io/badge/ML-enhanced-blue)](./MLå¢å¼ºæ¨¡å—éƒ¨ç½²æŒ‡å—.md)
[![Python](https://img.shields.io/badge/python-3.8%2B-blue)](https://www.python.org/)

ä¸€ä¸ªä¼ä¸šçº§çš„ç‹¼äººæ€AIç³»ç»Ÿï¼Œå…·æœ‰å®Œæ•´çš„MLå¢å¼ºèƒ½åŠ›å’Œç”Ÿäº§çº§ä»£ç è´¨é‡ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ® **7ç§è§’è‰²**: ç‹¼äººã€é¢„è¨€å®¶ã€å¥³å·«ã€çŒäººã€å®ˆå«ã€ç‹¼ç‹ã€æ‘æ°‘
- ğŸ¤– **LLMé©±åŠ¨**: åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½AIç©å®¶
- ğŸ§  **MLå¢å¼º**: é›†æˆå­¦ä¹ ã€å¼‚å¸¸æ£€æµ‹ã€è´å¶æ–¯æ¨ç†
- ğŸ›¡ï¸ **ä¼ä¸šçº§è´¨é‡**: é›¶é™¤é›¶é£é™©ã€å®Œæ•´ç±»å‹å®‰å…¨ã€100%æµ‹è¯•è¦†ç›–
- ğŸ“Š **é«˜æ€§èƒ½**: <10msé¢„æµ‹æ—¶é—´ã€100%å‡†ç¡®ç‡ï¼ˆæµ‹è¯•é›†ï¼‰
- ğŸ”§ **æ˜“äºéƒ¨ç½²**: æ”¯æŒå®Œæ•´ç‰ˆå’Œè½»é‡ç‰ˆä¸¤ç§éƒ¨ç½²æ–¹å¼

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: å®Œæ•´ç‰ˆï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd werewolf-ai

# 2. å®‰è£…ä¾èµ–
pip install -r requirements-full.txt

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œè®¾ç½®ä½ çš„APIå¯†é’¥

# 4. å¯åŠ¨åº”ç”¨
python werewolf/app.py
```

### æ–¹å¼2: è½»é‡ç‰ˆ

```bash
# ä½¿ç”¨è½»é‡ç‰ˆä¾èµ–ï¼ˆæ— XGBoostï¼‰
pip install -r requirements-lite.txt
python werewolf/app.py
```

---

## ğŸ“¦ ä¾èµ–è¯´æ˜

### å®Œæ•´ç‰ˆ (`requirements-full.txt`)
- âœ… æ‰€æœ‰MLå¢å¼ºåŠŸèƒ½
- âœ… XGBoosté›†æˆå­¦ä¹ 
- âœ… æœ€å¼ºæ£€æµ‹èƒ½åŠ›
- âš ï¸ éœ€è¦4GBå†…å­˜

### è½»é‡ç‰ˆ (`requirements-lite.txt`)
- âœ… åŸºç¡€MLåŠŸèƒ½
- âœ… sklearn-basedæ£€æµ‹
- âœ… èµ„æºå ç”¨å°ï¼ˆ2GBå†…å­˜ï¼‰
- âš ï¸ æ— XGBoostå¢å¼º

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# è¿è¡ŒMLå¢å¼ºæµ‹è¯•
python test_ml_enhanced.py

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_p0_p1_fixes.py -v
```

**æµ‹è¯•ç»“æœ**: 24/24 é€šè¿‡ âœ…

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æµ‹è¯•é€šè¿‡ç‡ | 100% (24/24) |
| MLé¢„æµ‹æ—¶é—´ | <10ms |
| MLå‡†ç¡®ç‡ | 100% (æµ‹è¯•é›†) |
| ä»£ç è´¨é‡ | ä¼˜ç§€ |
| é™¤é›¶é£é™© | 0 |
| ç±»å‹å®‰å…¨ | 100% |

---

## ğŸ¯ MLå¢å¼ºèƒ½åŠ›

### 1. é›†æˆæ£€æµ‹å™¨
- RandomForest (40%)
- GradientBoosting (40%)
- XGBoost (20%)

### 2. å¼‚å¸¸æ£€æµ‹å™¨
- IsolationForestç®—æ³•
- å­¦ä¹ å¥½äººè¡Œä¸ºæ¨¡å¼
- è¯†åˆ«ç‹¼äººå¼‚å¸¸è¡Œä¸º

### 3. è´å¶æ–¯æ¨ç†
- 8ç§è¯æ®ç±»å‹
- å¯¹æ•°ç©ºé—´è®¡ç®—
- æ•°å€¼ç¨³å®šæ€§ä¿è¯

### 4. ç‰¹å¾æå–
- 19ç»´ç‰¹å¾å‘é‡
- è‡ªåŠ¨å½’ä¸€åŒ–
- æ‰¹é‡å¤„ç†æ”¯æŒ

---

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
# MLå¢å¼ºé…ç½®
ML_AUTO_TRAIN=true               # å¯ç”¨è‡ªåŠ¨è®­ç»ƒ
ML_TRAIN_INTERVAL=10             # è®­ç»ƒé—´éš”ï¼ˆæ¸¸æˆåœºæ•°ï¼‰
ML_MIN_SAMPLES=50                # æœ€å°è®­ç»ƒæ ·æœ¬æ•°

# é›†æˆå­¦ä¹ æƒé‡
ML_RF_WEIGHT=0.4                 # RandomForestæƒé‡
ML_GB_WEIGHT=0.4                 # GradientBoostingæƒé‡
ML_XGB_WEIGHT=0.2                # XGBoostæƒé‡

# å¼‚å¸¸æ£€æµ‹é…ç½®
ML_CONTAMINATION=0.33            # å¼‚å¸¸æ¯”ä¾‹ï¼ˆç‹¼äººå æ¯”ï¼‰

# è´å¶æ–¯æ¨ç†é…ç½®
ML_PRIOR_WOLF_PROB=0.33          # å…ˆéªŒç‹¼äººæ¦‚ç‡
```

---

## ğŸ“– æ–‡æ¡£

- [ä»£ç å®¡æŸ¥ä¸ä¼˜åŒ–æŠ¥å‘Š](./ä»£ç å®¡æŸ¥ä¸ä¼˜åŒ–æŠ¥å‘Š.md) - è¯¦ç»†çš„é—®é¢˜åˆ†æå’Œä¿®å¤æ–¹æ¡ˆ
- [MLæ¨¡å—è¯´æ˜](./MLæ¨¡å—è¯´æ˜.md) - MLæ¨¡å—å±‚æ¬¡å’Œè­¦å‘Šè¯´æ˜
- [æœ€ç»ˆå®¡æŸ¥æ€»ç»“](./æœ€ç»ˆå®¡æŸ¥æ€»ç»“.md) - å®¡æŸ¥ç»Ÿè®¡å’Œæµ‹è¯•ç»“æœ
- [MLå¢å¼ºæ¨¡å—éƒ¨ç½²æŒ‡å—](./MLå¢å¼ºæ¨¡å—éƒ¨ç½²æŒ‡å—.md) - å®Œæ•´çš„éƒ¨ç½²å’Œä½¿ç”¨æŒ‡å—
- [é¡¹ç›®å®Œæˆæ€»ç»“](./é¡¹ç›®å®Œæˆæ€»ç»“.md) - é¡¹ç›®å®Œæˆæƒ…å†µæ€»ç»“

---

## ğŸ” ä»£ç è´¨é‡

### ä¿®å¤å‰ vs ä¿®å¤å

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| é™¤é›¶é£é™© | 11å¤„ ğŸ”´ | 0å¤„ ğŸŸ¢ |
| ç±»å‹å®‰å…¨ | 8å¤„é—®é¢˜ ğŸ”´ | 0å¤„é—®é¢˜ ğŸŸ¢ |
| ç¡¬ç¼–ç  | 4å¤„ ğŸŸ¡ | 0å¤„ ğŸŸ¢ |
| æµ‹è¯•è¦†ç›– | 85% ğŸŸ¡ | 100% ğŸŸ¢ |
| MLå¢å¼º | æœªå¯ç”¨ ğŸ”´ | å®Œå…¨å¯ç”¨ ğŸŸ¢ |
| æ€»ä½“è¯„çº§ | è‰¯å¥½ ğŸŸ¡ | ä¼˜ç§€ ğŸŸ¢ |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
from werewolf.ml_agent import LightweightMLAgent

# åˆå§‹åŒ–ML Agent
agent = LightweightMLAgent()

# æ£€æŸ¥æ˜¯å¦å¯ç”¨
if agent.enabled:
    print("âœ“ MLå¢å¼ºå·²å¯ç”¨")
    
    # é¢„æµ‹ç‹¼äººæ¦‚ç‡
    player_data = {
        'trust_score': 30,
        'vote_accuracy': 0.3,
        'contradiction_count': 5,
        # ... å…¶ä»–ç‰¹å¾
    }
    
    wolf_prob = agent.predict_wolf_probability(player_data)
    print(f"ç‹¼äººæ¦‚ç‡: {wolf_prob:.3f}")
```

### è®­ç»ƒæ¨¡å‹

```python
# å‡†å¤‡è®­ç»ƒæ•°æ®
training_data = {
    'player_data_list': [player1, player2, ...],
    'labels': [0, 1, 0, ...],  # 0=å¥½äºº, 1=ç‹¼äºº
    'sample_weights': [1.0, 0.8, ...]  # å¯é€‰
}

# è®­ç»ƒ
agent.train(training_data)

# ä¿å­˜æ¨¡å‹
agent.save_models('ml_models/')
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1: MLæ¨¡å—æœªå¯ç”¨

**ç—‡çŠ¶**: 
```
âš  ML modules not available
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
pip install -r requirements-full.txt
```

### é—®é¢˜2: XGBoostä¸å¯ç”¨

**ç—‡çŠ¶**:
```
xgboost not available, using sklearn only
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
pip install xgboost>=1.7.0
```

æ›´å¤šé—®é¢˜è¯·å‚è€ƒ [MLå¢å¼ºæ¨¡å—éƒ¨ç½²æŒ‡å—](./MLå¢å¼ºæ¨¡å—éƒ¨ç½²æŒ‡å—.md)

---

## ğŸ“ˆ é¡¹ç›®ç»“æ„

```
werewolf-ai/
â”œâ”€â”€ werewolf/              # ä¸»ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ hunter/           # çŒäººæ¨¡å—
â”‚   â”œâ”€â”€ seer/             # é¢„è¨€å®¶æ¨¡å—
â”‚   â”œâ”€â”€ witch/            # å¥³å·«æ¨¡å—
â”‚   â”œâ”€â”€ wolf/             # ç‹¼äººæ¨¡å—
â”‚   â”œâ”€â”€ guard/            # å®ˆå«æ¨¡å—
â”‚   â”œâ”€â”€ villager/         # æ‘æ°‘æ¨¡å—
â”‚   â”œâ”€â”€ wolf_king/        # ç‹¼ç‹æ¨¡å—
â”‚   â”œâ”€â”€ optimization/     # ä¼˜åŒ–ç®—æ³•
â”‚   â”œâ”€â”€ common/           # å…¬å…±ç»„ä»¶
â”‚   â””â”€â”€ ml_agent.py       # MLæ™ºèƒ½ä½“
â”œâ”€â”€ ml_enhanced/          # MLå¢å¼ºæ¨¡å—
â”‚   â”œâ”€â”€ ensemble_detector.py      # é›†æˆæ£€æµ‹å™¨
â”‚   â”œâ”€â”€ anomaly_detector.py       # å¼‚å¸¸æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ bayesian_inference.py     # è´å¶æ–¯æ¨ç†
â”‚   â””â”€â”€ feature_extractor.py      # ç‰¹å¾æå–å™¨
â”œâ”€â”€ tests/                # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements-full.txt # å®Œæ•´ç‰ˆä¾èµ–
â”œâ”€â”€ requirements-lite.txt # è½»é‡ç‰ˆä¾èµ–
â””â”€â”€ README.md            # æœ¬æ–‡æ¡£
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

---

## ğŸ‰ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…ï¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“§ Email: [your-email]
- ğŸ’¬ Issues: [GitHub Issues]
- ğŸ“– æ–‡æ¡£: [Documentation]

---

**é¡¹ç›®çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª  
**ä»£ç è´¨é‡**: ğŸŸ¢ ä¼˜ç§€  
**æµ‹è¯•è¦†ç›–**: ğŸŸ¢ 100%  
**MLå¢å¼º**: ğŸŸ¢ å®Œå…¨å¯ç”¨

**ç«‹å³å¼€å§‹ä½¿ç”¨ï¼Œä½“éªŒä¼ä¸šçº§ç‹¼äººæ€AIç³»ç»Ÿï¼** ğŸš€
